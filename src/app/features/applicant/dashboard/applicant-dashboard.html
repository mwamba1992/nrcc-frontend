<app-applicant-layout>
  <!-- Welcome Banner -->
    <div class="welcome-banner">
      <div class="welcome-content">
        <h1>Welcome Back, {{ currentUser?.firstName || currentUser?.email }}!</h1>
        <p>National Road Classification Commission Portal - Manage your road reclassification applications efficiently</p>
      </div>
    </div>

    <!-- Statistics Cards -->
    <div class="stats-container" *ngIf="!isLoading">
      <div class="stat-card blue">
        <div class="stat-header">
          <h4>Total Applications</h4>
          <div class="stat-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <polyline points="14 2 14 8 20 8"/>
            </svg>
          </div>
        </div>
        <h2>{{ stats.total }}</h2>
        <div class="stat-change positive" *ngIf="stats.trend.total > 0">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/>
            <polyline points="17 6 23 6 23 12"/>
          </svg>
          <span>+{{ stats.trend.total }}% from last month</span>
        </div>
      </div>

      <div class="stat-card green">
        <div class="stat-header">
          <h4>Amount Paid</h4>
          <div class="stat-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="12" y1="1" x2="12" y2="23"/>
              <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
            </svg>
          </div>
        </div>
        <h2>TZS {{ stats.amountPaid | number }}</h2>
        <div class="stat-change">
          <span>Total fees paid</span>
        </div>
      </div>

      <div class="stat-card gray">
        <div class="stat-header">
          <h4>Approved</h4>
          <div class="stat-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
          </div>
        </div>
        <h2>{{ stats.approved }}</h2>
        <div class="stat-change positive" *ngIf="stats.trend.approved > 0">
          <span>+{{ stats.trend.approved }}% success rate</span>
        </div>
      </div>

      <div class="stat-card orange">
        <div class="stat-header">
          <h4>In Review</h4>
          <div class="stat-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
          </div>
        </div>
        <h2>{{ stats.inReview }}</h2>
        <div class="stat-change">
          <span>Under review</span>
        </div>
      </div>
    </div>

    <!-- Skeleton Loaders for Stats -->
    <div class="stats-container" *ngIf="isLoading">
      <app-skeleton-loader type="card" [count]="1" height="140px"></app-skeleton-loader>
      <app-skeleton-loader type="card" [count]="1" height="140px"></app-skeleton-loader>
      <app-skeleton-loader type="card" [count]="1" height="140px"></app-skeleton-loader>
      <app-skeleton-loader type="card" [count]="1" height="140px"></app-skeleton-loader>
    </div>

    <!-- Data Visualization Section -->
    <div class="dashboard-grid" *ngIf="!isLoading">
      <div class="chart-section">
        <app-line-chart
          [data]="chartData"
          [title]="'Your Application History'"
          [height]="'300px'">
        </app-line-chart>
      </div>

      <div class="activity-section">
        <app-activity-timeline
          [activities]="recentActivities"
          [title]="'Recent Activity'"
          [maxItems]="5">
        </app-activity-timeline>
      </div>
    </div>

    <!-- Skeleton loaders for charts -->
    <div class="dashboard-grid" *ngIf="isLoading">
      <app-skeleton-loader type="chart" height="340px"></app-skeleton-loader>
      <app-skeleton-loader type="chart" height="340px"></app-skeleton-loader>
    </div>

    <!-- Quick Actions -->
    <div class="services-section">
      <div class="section-header">
        <h3>Quick Actions</h3>
      </div>

      <div class="services-grid">
        <div class="service-card" (click)="navigateToApplications()">
          <div class="service-icon blue-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <polyline points="14 2 14 8 20 8"/>
            </svg>
          </div>
          <div class="service-content">
            <h4>New Application</h4>
            <p>Submit road reclassification request</p>
          </div>
        </div>

        <div class="service-card" (click)="navigateToApplications()">
          <div class="service-icon green-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <polyline points="14 2 14 8 20 8"/>
            </svg>
          </div>
          <div class="service-content">
            <h4>My Applications</h4>
            <p>View all submitted applications</p>
          </div>
        </div>

        <div class="service-card">
          <div class="service-icon purple-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"/>
              <path d="m21 21-4.35-4.35"/>
            </svg>
          </div>
          <div class="service-content">
            <h4>Track Status</h4>
            <p>Monitor application progress</p>
          </div>
        </div>

        <div class="service-card">
          <div class="service-icon orange-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
            </svg>
          </div>
          <div class="service-content">
            <h4>Help & Support</h4>
            <p>Get assistance and guidelines</p>
          </div>
        </div>
      </div>
    </div>
</app-applicant-layout>
