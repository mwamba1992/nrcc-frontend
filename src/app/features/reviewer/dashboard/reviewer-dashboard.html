<app-reviewer-layout>
  <div class="reviewer-dashboard">
    <div class="dashboard-content">
      <!-- Welcome Banner -->
      <div class="welcome-banner">
        <div class="banner-content">
          <div class="banner-text">
            <h1>Welcome back, {{ currentUser?.firstName }}!</h1>
            <p>Review and manage road reclassification applications for {{ reviewerLevel }}.</p>
            <div class="banner-stats">
              <div class="banner-stat-item">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                </svg>
                <span>Active Today</span>
              </div>
              <div class="banner-stat-item">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="10"/>
                  <polyline points="12 6 12 12 16 14"/>
                </svg>
                <span>Last login: Today</span>
              </div>
            </div>
          </div>
          <div class="banner-icon">
            <svg width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <polyline points="14 2 14 8 20 8"/>
              <line x1="16" y1="13" x2="8" y2="13"/>
              <line x1="16" y1="17" x2="8" y2="17"/>
              <polyline points="10 9 9 9 8 9"/>
            </svg>
          </div>
        </div>
      </div>

      <!-- Stats Cards -->
      <div class="stats-grid" *ngIf="!isLoading">
        <div class="stat-card pending-card">
          <div class="card-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
          </div>
          <div class="card-body">
            <h3>{{ stats.pending }}</h3>
            <p>Pending Review</p>
            <span class="card-subtitle">Applications awaiting review</span>
          </div>
          <div class="card-trend positive" *ngIf="stats.trend.pending > 0">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
              <polyline points="18 15 12 9 6 15"></polyline>
            </svg>
            <span>+{{ stats.trend.pending }}%</span>
          </div>
        </div>

        <div class="stat-card approved-card">
          <div class="card-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
          </div>
          <div class="card-body">
            <h3>{{ stats.approved }}</h3>
            <p>Approved This Month</p>
            <span class="card-subtitle">Successfully approved applications</span>
          </div>
          <div class="card-trend positive" *ngIf="stats.trend.approved > 0">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
              <polyline points="18 15 12 9 6 15"></polyline>
            </svg>
            <span>+{{ stats.trend.approved }}%</span>
          </div>
        </div>

        <div class="stat-card total-card">
          <div class="card-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M3 3h7v7H3z"/>
              <path d="M14 3h7v7h-7z"/>
              <path d="M14 14h7v7h-7z"/>
              <path d="M3 14h7v7H3z"/>
            </svg>
          </div>
          <div class="card-body">
            <h3>{{ stats.total }}</h3>
            <p>Total Applications</p>
            <span class="card-subtitle">{{ stats.reviewed }} applications reviewed</span>
          </div>
          <div class="card-trend positive" *ngIf="stats.trend.reviewed > 0">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
              <polyline points="18 15 12 9 6 15"></polyline>
            </svg>
            <span>+{{ stats.trend.reviewed }}%</span>
          </div>
        </div>
      </div>

      <!-- Skeleton Loaders for Stats -->
      <div class="stats-grid" *ngIf="isLoading">
        <app-skeleton-loader type="card" [count]="1" height="88px"></app-skeleton-loader>
        <app-skeleton-loader type="card" [count]="1" height="88px"></app-skeleton-loader>
        <app-skeleton-loader type="card" [count]="1" height="88px"></app-skeleton-loader>
      </div>

      <!-- Data Visualization Section -->
      <div class="dashboard-grid" *ngIf="!isLoading">
        <div class="chart-section">
          <app-line-chart
            [data]="chartData"
            [title]="'Applications Trend (Last 6 Months)'"
            [height]="'320px'">
          </app-line-chart>
        </div>

        <div class="activity-section">
          <app-activity-timeline
            [activities]="recentActivities"
            [title]="'Recent Activity'"
            [maxItems]="5">
          </app-activity-timeline>
        </div>
      </div>

      <!-- Skeleton loaders for charts -->
      <div class="dashboard-grid" *ngIf="isLoading">
        <app-skeleton-loader type="chart" height="360px"></app-skeleton-loader>
        <app-skeleton-loader type="chart" height="360px"></app-skeleton-loader>
      </div>

      <!-- Applications Queue -->
      <div class="recent-applications">
        <div class="section-header">
          <h3>Applications Queue</h3>
          <div class="filters">
            <button class="filter-btn" [class.active]="activeFilter === 'all'" (click)="setFilter('all')">All</button>
            <button class="filter-btn" [class.active]="activeFilter === 'pending'" (click)="setFilter('pending')">Pending</button>
            <button class="filter-btn" [class.active]="activeFilter === 'reviewed'" (click)="setFilter('reviewed')">Reviewed</button>
            <button class="filter-btn" [class.active]="activeFilter === 'forwarded'" (click)="setFilter('forwarded')">Forwarded</button>
          </div>
        </div>

        <div class="empty-state" *ngIf="!isLoading">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
            <polyline points="10 9 9 9 8 9"/>
          </svg>
          <h4>No applications in queue</h4>
          <p>You're all caught up! New applications will appear here when submitted.</p>
        </div>

        <!-- Skeleton for table -->
        <div *ngIf="isLoading">
          <app-skeleton-loader type="table-row" [count]="5"></app-skeleton-loader>
        </div>
      </div>
    </div>
  </div>
</app-reviewer-layout>
